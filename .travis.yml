dist: xenial
language: python

python:
  - "3.6"

sudo: false

cache:
  - pip
  - apt

# install dependencies
install:
  - pip install poetry
  - poetry install -vv --no-interaction

# run tests
script:
  - cd tests
  - export MANIFEST_SERVICE_CONFIG_PATH=../config.json
  - python -m pytest -v

after_script:
  - poetry run python-codacy-coverage -r coverage.xml
